<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head><title>Listagem Usuarios</title></h:head>
<h:body>
	
	<div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px">
		<p:link outcome="cadastro_usuario" value="Voltar"/>
		<p:commandButton value="Contar" actionListener="#{usuarioBean.contar}" update="messages" process="@this" immediate="true" />
	</div>
	
	<p:messages id="messages" showDetail="true" closable="true">
    	<p:autoUpdate/>
    </p:messages>
	
	<p:dataTable id="tabela" value="#{usuarioBean.getLista()}" var="u" emptyMessage="Nenhum registro encontrado">
		<p:column headerText="Id" sortBy="#{u.id}"  sortOrder="asc"><p:outputLabel value="#{u.id}"/></p:column>
		<p:column headerText="Nome"><p:outputLabel value="#{u.nome}"/></p:column>
		<p:column headerText="Sexo"><p:outputLabel value="#{u.sexo}"/></p:column>
		<p:column headerText="Data Nascimento"><p:outputLabel value="#{u.dataNascimento}"/></p:column>
		<p:column headerText="Ações" exportable="false">
			<p:commandButton icon="pi pi-cog" update=":form:detalhes-dialog" oncomplete="PF('detalhesDialog').show()" process="@this">
				<f:setPropertyActionListener value="#{u}" target="#{usuarioBean.usuario}" />
			</p:commandButton>
		</p:column>
	</p:dataTable>
	
	<h:form id="form">
		<p:dialog header="Detalhes do usuário" showEffect="fade" modal="true" widgetVar="detalhesDialog" responsive="true">
			<p:outputPanel id="detalhes-dialog" class="ui-fluid">
			<h:inputHidden value="#{usuarioBean.usuario.id}"/>
				<p:panelGrid columns="2">
					
					
					<p:outputLabel value="Nome"/>
					<p:inputText value="#{usuarioBean.usuario.nome}" required="true" requiredMessage="O campo 'Nome' é obrigatório"/>
					
					<p:outputLabel value="Data Nascimento"/>
					<p:datePicker   value="#{usuarioBean.usuario.dataNascimento}" locale='pt'  required="true" requiredMessage="O campo 'Data Nascimento' é obrigatório" />
					
					<p:outputLabel value="Sexo"/>
					<h:selectOneMenu id="txt3" value="#{usuarioBean.usuario.sexo}" required="true" requiredMessage="O campo 'Sexo' é obrigatório" label="Text 3">
				    	<f:selectItem itemLabel="" itemValue="" noSelectionOption="true"/>
				    	<f:selectItem itemLabel="Feminino" itemValue="feminino"/>
				    	<f:selectItem itemLabel="Masculino" itemValue="masculino"/>
				    </h:selectOneMenu>
					
					<p:outputLabel value="Senha"/>
					<p:inputText id="feedback" value="#{usuarioBean.usuario.senha}" required="true" requiredMessage="O campo 'Senha' é obrigatório"/>
				
					
				
					<p:commandButton class="ui-button-danger" value="excluir" action="#{usuarioBean.excluir}" 
						update="messages @this" onclick="PF('detalhesDialog').hide()"/>
					<p:commandButton value="Editar" actionListener="#{usuarioBean.editar}"
                   update="detalhes-dialog messages" process="detalhes-dialog @this" onclick="PF('manageProductDialog').hide()" />
					
				</p:panelGrid>
			</p:outputPanel>
			
		</p:dialog>
	</h:form>

	
</h:body>
</html>
